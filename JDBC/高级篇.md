---
简介: 高级篇
视频地址: https://www.bilibili.com/video/BV1Tx421S7HZ?spm_id_from=333.788.videopod.episodes&vd_source=a503248b608b8da9614b6dd7eb24901d&p=29
---
# JDBC优化及工具类封装

## 现有问题

> 我们在使用JDBC的过程中，发现部分代码存在冗余的问题：
>
> - 创建连接池。
> - 获取连接。
> - 连接的回收。

## 1.0 版本（软编码+Druid）

> [[Java中的传参|关于Java中的传参]]
> [[Java输入输出流|关于Java输入输出流]]
> [[ Java中的对象引用|关于Java中的对象引用]]

工具类：
```java
/**  
 * JDBC工具类  
 * 1. 维护一个连接池对象  
 * 2. 提供获取连接的方法  
 * 3. 提供回收链接的方法  
 *  
 * 注意：工具类仅对外提供共性的功能代码，所有方法都是静态方法  
 */  
public class JDBCUtil {  
    //创建连接池引用，因为提供给当前项目的全局使用，所以创建为静态的  
    private  static DataSource dataSource;  
  
    static{  
        try {  
            Properties properties = new Properties();  
            InputStream inputStream = JDBCUtil.class.getClassLoader().getResourceAsStream("db.properties");  
            properties.load(inputStream);  
  
            dataSource = DruidDataSourceFactory.createDataSource(properties);  
  
            if (inputStream != null) {//加一个关闭流的操作，比较合规  
                inputStream.close();  
            }  
        } catch (Exception e) {  
            throw new RuntimeException(e);  
        }  
    }  
  
    public static Connection getConnection(){  
        Connection connection = null;  
        try {  
            connection = dataSource.getConnection();  
        } catch (Exception e) {  
            throw new RuntimeException(e);  
        }  
        return connection;  
    }  
  
    public static void release(Connection connection){  
        JdbcUtils.close(connection);  
    }  
}
```

使用
```java
public class JDBCUtilTest {  
    @Test  
    public void testGetConnection() {  
        Connection connection = JDBCUtil.getConnection();  
        System.out.println(connection);  
        JDBCUtil.release(connection);  
    }  
}
```


