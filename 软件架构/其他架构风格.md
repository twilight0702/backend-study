对应ppt：[[Unit4-6 其它风格.pdf]]

# 正交架构风格

来源自“正交”的概念，两个东西互不干扰、互不依赖、相互独立地发挥作用。

类似数独？横竖独立判断，依次填入
## 组成

正交软件架构(Orthogonal Software Architecture) 由<font color="#c0504d">组织层(Layer)和线索 (Thread)的组件(Component)构成</font>。 
- **层**是由一组具有相同抽象级别(Level of Abstraction)的组件构成。 
- **线索**是子系统的特例，它是由完成不同层次功 能的组件组成(通过相互调用来关联)，每一条线索完成整个系统中相对独立的一部分功能。 
- 如果线索是相互独立的，即不同线索中的组件 之间没有相互调用，那么这个结构就是完全正交的。

正交软件架构是一种以垂直线索组件族为基础的层次化结构，其基本思想是把应用系统的结构按功能 的正交相关性，垂直分割为若干个线索 (子系统)，线索又分为几个层次，每个 线索由多个具有不同层次功能和不同抽 象级别的组件构成。

## 特点

- 由完成不同功能的n(n>1)个线索(子系统)组成； 
- 系统具有m(m >1)个不同抽象级别的层； 
- 线索之间是相互独立的(正交的)； 
- 系统有一个公共驱动层(一般为最高层)和公共数据结构(一般为最低层)。
- 横纵有着不同的颗粒度，可以分开看（竖着看系统，横着看层次）

## 优点

- 结构清晰，易于理解。由于线索功能相 互独立，组件的位置可以清楚地说明它所实现 的抽象层次和负担的功能。 
- 易修改，可维护性强。由于线索之间是 相互独立的，所以对一个线索的修改不会影响 到其他线索。 
- 可移植性强，重用粒度大。因为正交结 构可以为一个领域内的所有应用程序所共享， 这些软件有着相同或类似的层次和线索，可以 实现架构级的重用

## 缺点

- 在实际应用中，并不是所有软件系统都能完全正交化，或者有时完全正交化的成本太高。因此，在进行应用项目的软件架构设计时，必须反复权衡进一步正交化的额外开销与所得到的更好的性能之间的关系。

- 设计时候成正交，但是从代码回复回去的时候可能很难判断是正交风格，尤其当他不完全正交的时候

# 异构风格

## 为什么要异构风格

每一个不同的风格各有优劣，从不同的角度思考会选择不同的架构风格，实际应用中也会融合多种风格

## 什么是异构风格

异构架构是几种风格的组合，组合方式可能有如下几种： 
- 使用层次结构。一个系统组件被组织成某种架构风格，但它的内部结构可能是另一种完全不同的风格。 
- 允许单一组件使用复合的连接件。（比如很多系统都有事件驱动（都有消息收发，这属于连接件的设计）；比如混合使用同步和异步传输（使用消息队列）；……）

## 优点

- 选择异构架构风格，可以实现遗留代码的重用。 
- 在某一单位中，规定了共享软件包和某些标准，但仍会存在解释和表示习惯上的不同。选择异构架构风格，可以解决这一问题。
	- 比如大公司多组同时开发，可能用的语言都不一样，就可以用异构，各自封装在各自的模块中。之后再兼容

## 缺点

不同风格之间的兼容问题有时很难解决，可能需要加入解释器

## 应用实例

### 内外有别

> “内外有别”模型是指：**对内系统（企业内部）和对外系统（面向外部用户）采用不同架构风格**，以兼顾**性能、安全与使用便利性**。

- **外部系统**：采用 **B/S 架构**，通过浏览器访问，便于部署、维护和跨平台使用。
- **内部系统**：采用 **C/S 架构**，通过专用客户端访问，增强功能性、安全性和数据处理能力。

很多企业这样做，区分内网和外网

### 查改有别

> “查改有别”即“查询（查）”与“修改（改）”操作**分离设计**，通常体现在架构风格、系统接口、服务部署、安全策略等方面的区别。

简化理解：

|操作|特点|适合的架构风格/部署方式|
|---|---|---|
|**查（查询）**|访问频率高、逻辑简单、数据量大、强调响应速度|B/S 架构（Web接口），缓存优化，读写分离等|
|**改（修改）**|数据敏感、需权限控制、逻辑复杂、操作频率低|C/S 架构、本地客户端、API带权限认证，写接口严格管控|

### 区别？

性能：
- 内外有别安全性高，但外网访问效率低
- 查改有别访问效率高

成本：
- 内外有别要两个client（查看浏览+修改维护），browser端也都要实现相同功能，开发成本高
- 查改有别需要一个修改维护client+信道vpn，在内外都可以用，再加一个查询和浏览工作站，但是留了信道就有可能泄露，有可能被攻击

最终还是要根据实际权衡

# MVC 模型-视图-控制器风格

“常青树”，不断进化，和语言分割（不是java也可以），不一定是完全面向对象的

## 组成

 MVC结构主要包括模型、视图和控制器 三部分。 
 - 模型(Model, M)：模型是应用程序的核心，它封装了问题的核心数据、逻辑关系和计算功能，提供了处理问题的操作过程。 
 - 视图(View,V)：视图是模型的表示， 提供了交互界面，为用户显示模型信息。 
 - 控制器(Controller, C)：控制器负责处 理用户与系统之间的交互，为用户提供操 作接口。

但有些信息也可以直接M和V直连，不通过C（变种）
其他的变种还有很多

## 优点

- 多个视图与一个模型相对应。变化—— 传播机制确保了所有相关视图都能够及时地获取模型变化信息，从而使所有视图和控制器同步，便于维护。
	- 比如大数据大屏，后台数据变了多个view都可以同步变
- 具有良好的移植性。由于模型独立于视 图，因此可以方便的实现不同部分的移植。 
- 系统被分割为三个独立的部分，当功能发生变化时，改变其中的一个部分就能满足要 求。

## 缺点

- 需要学习技术栈，增加了系统设计和运行复杂性。 
- 视图与控制器连接过于紧密，妨碍了二者的独立重用。（控制器很难重用）
- 视图访问模型的效率比较低。由于模型具有不同的操作接口，因此视图需要多次访问模型才能获得足够的数据。 
- 频繁访问未变化的数据，也将降低系统的性能。（现多加入缓存系统，优化这部分）

## 应用实例

目前比较好的MVC：
- 老牌的有Struts，Webwork。 
- 新兴的MVC框架有Spring MVC，Tapestry，JSF等。 
- 还有，如Dinamica，VRaptor等 ◦ 
这些框架都提供了较好的层次分隔能力。 在实现良好的MVC分隔的基础上，提供一 些现成的辅助类库，同时也促进了生产效 率的提高。

# 架构总结

有些架构是全局的，比如分层；有些是局部的，比如说数据流

架构风格是基于不 同的视角或层次抽象出来的。不同风格之间常常 具有交叉现象。
- 主程序和子程序风格以及面向对象风格几乎是目前一 切软件构件、连接件的设计和实现基础； 
- 分层系统的层次结构风格几乎是一切复杂系统的基本 结构方法； 
- 事件系统是一种受操作系统管理控制的部件连接方式； ◦ 仓库是部件的设计结构； 
- 管道/过滤器、客户/服务器、解释器等则是特殊的系统 结构方法。 
- 即：对于同一种软件架构，从不同的视角和层次可能 抽象出不同的架构风格。

架构分析：有一个总体架构作为线索（比如分层架构），然后再向下分析（每一层），发现有的不属于这个线索，可以单独再开一个说（比如负载均衡、管理性质的东西）

# 软件架构模式

## 定义

根据系统的结构组织定义了软件系统族，以及构成系统族的组件之间的关系

## 和软件风格的区别

> 实际考试不会考这个区分，本身也不清晰

多数人认为相同

 Frank Buschmann 认为体系结构的模式与 风格是有区别的，它们的区别和联系主 要在于： 
 - 体系结构风格主要描述应用系统的总 体结构框架。 
 - 架构风格相对独立。 
 - 模式比架构风格更加面向问题
颗粒度不同

# 软件框架

## 定义

框架，即framework。是某种应用的半成品，就是 一组组件，供选用完成自己的系统。简单说就是 使用别人搭好的舞台，你来做表演。而且，框架 一般是成熟的，不断升级的软件，框架更优了，我的软件也更优了。但也存在学习成本（较高）

一些比较基础的框架比如springboot，在此基础上又有了比如ruoyi框架，到低代码开发，开发越来越简单，架构越来越难

补充：软件框架：
软件架构可以看做是一个软件系统从整 体到部分的最高层次的划分。 根据组成派定义，软件架构主要反映系 统由哪些部分组成，以及这些部分是如 何组成的。 根据决策派定义，软件架构建造一个系 统所作出的最高层次的、以后难以更改 的，商业的和技术的决定

## 常用技术框架

前端：JQuery、Javascript、HTML、CSS 
后端： java、springboot、mybatis、 elastic-job
数据库： mysql（或者其他非关系型数据库mangoDB）

要紧跟潮流

# 练习2

存储不会触发其他的事件，不符合黑板
仓库：存，需要的时候取

# 练习3

使用黑板风格

1. 没有通用的解决方案，只能得到近似解。这就是黑板的应用
2. 已知模板放在黑板上->再去进行下一步推断

| 特点                | 黑板架构匹配原因                                                          |
| ----------------- | ----------------------------------------------------------------- |
| **问题复杂、无确定解法**    | 黑板架构最适合**探索式、推理式问题**，比如语音识别、图像分析、AI 推理系统等，这与蛋白质预测的场景极其相似。         |
| **多种算法/模型组合协同工作** | 各个“模块（知识源）”可以使用不同算法（如模板匹配、机器学习、能量最小化等）独立处理一部分任务，共享一个“黑板”存储推理中间结果。 |
| **逐步构造大结构（蛋白质）**  | 中间结果通过黑板整合和不断更新，最终输出完整预测结果                                        |
| **数据驱动、可扩展性强**    | 可随时加入新的推理模块（如 AlphaFold 风格模块），不影响原有系统                             |
变种的语音识别

# 练习4

事件驱动风格（消息通知）

可以用消息总线实现这个通知的检测和管理功能

# 练习5

仓库风格？
微服务？